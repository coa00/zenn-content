---
title: "Claude Code ã®è¨±å¯é€šçŸ¥ã‚’ã‚¹ãƒžãƒ›ã«é£›ã°ã—ã¦ã€ãƒ‡ã‚¹ã‚¯ã‹ã‚‰é›¢ã‚Œã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ"
emoji: "ðŸ“±"
type: "tech"
topics: ["ClaudeCode", "ntfy", "è‡ªå‹•åŒ–", "é–‹ç™ºç’°å¢ƒ", "bash"]
published: true
---

## ã¯ã˜ã‚ã«

ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’æ·¹ã‚Œã¦æˆ»ã£ãŸã‚‰ã€Claude Code ãŒ 15 åˆ†é–“æ­¢ã¾ã£ã¦ã„ãŸã€‚

Permission ã®ç¢ºèªå¾…ã¡ã€‚`allowlist` ã«è¿½åŠ ã™ã‚Œã°è¨±å¯ã‚’æ¸›ã‚‰ã›ã¾ã™ãŒã€æœªçŸ¥ã®ã‚³ãƒžãƒ³ãƒ‰ã‚„ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ã¾ã§å…¨è¨±å¯ã™ã‚‹ã®ã¯ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã‹ã¨ã„ã£ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãšã£ã¨å¼µã‚Šä»˜ã„ã¦ã„ã‚‹ã®ã‚‚ç¾å®Ÿçš„ã§ã¯ãªã„ã€‚

ãã“ã§ **Claude Code ã® PermissionRequest ãƒ•ãƒƒã‚¯ã¨ [ntfy.sh](https://ntfy.sh) ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã‚¹ãƒžãƒ›ã‹ã‚‰ Allow / Deny ã‚’é¸ã¹ã‚‹ä»•çµ„ã¿** ã‚’ä½œã‚Šã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ä»˜ãã§ OSS åŒ–ã—ãŸã®ã§ã€3 åˆ†ã§å°Žå…¥ã§ãã¾ã™ã€‚

https://github.com/coa00/claude-push

## èª²é¡Œï¼šã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å¼µã‚Šä»˜ãã‹ã€å…¨è¨±å¯ã™ã‚‹ã‹ã®äºŒæŠž

Claude Code ã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚„ä¿®æ­£ã‚’ä»»ã›ã¦ã„ã‚‹ã¨ã€ã“ã‚“ãªå ´é¢ã«é­é‡ã—ã¾ã™ã€‚

```
Claude wants to run: rm -rf dist && npm run build
Allow? (y/n)
```

ã“ã®ç¢ºèªãŒå‡ºã‚‹ãŸã³ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«æˆ»ã£ã¦ `y` ã‚’æŠ¼ã™ã€‚ä½œæ¥­ã«é›†ä¸­ã—ã¦ã„ã‚‹ã¨è¦‹é€ƒã—ã¦ã€Claude Code ãŒæ•°åˆ†é–“æ­¢ã¾ã£ãŸã¾ã¾â€”â€”ã¨ã„ã†ã“ã¨ãŒé »ç¹ã«èµ·ãã¦ã„ã¾ã—ãŸã€‚

| å¯¾å‡¦æ³• | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ |
|--------|---------|-----------|
| æ¯Žå›žã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ç¢ºèª | å®‰å…¨ | å¸­ã‚’é›¢ã‚Œã‚‰ã‚Œãªã„ |
| `allowlist` ã§å…¨è¨±å¯ | æ¥½ | æœªçŸ¥ã®ã‚³ãƒžãƒ³ãƒ‰ã‚‚é€šã‚‹ |
| **ã‚¹ãƒžãƒ›ã«é€šçŸ¥ã—ã¦æ‰¿èª** | é›¢å¸­OKï¼‹å®‰å…¨ | ä»•çµ„ã¿ã®æ§‹ç¯‰ãŒå¿…è¦ |

3 ã¤ç›®ã‚’å®Ÿç¾ã™ã‚‹ã®ãŒä»Šå›žã® `claude-push` ã§ã™ã€‚

### å…ƒãƒã‚¿

[konsti-web/claude_push](https://github.com/konsti-web/claude_push) ã¨ã„ã†å…ˆè¡Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã™ãŒã€Windows + PowerShell + ã‚­ãƒ¼ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æ³¨å…¥æ–¹å¼ã§ã€macOS / Linux ã§ã¯å‹•ãã¾ã›ã‚“ã€‚åŒã˜èª²é¡Œã‚’æ„Ÿã˜ã¦ã„ãŸã®ã§ã€**bash + PermissionRequest ãƒ•ãƒƒã‚¯** ã§ä¸€ã‹ã‚‰ä½œã‚Šç›´ã—ã¾ã—ãŸã€‚

## ä»•çµ„ã¿ï¼šPermissionRequest ãƒ•ãƒƒã‚¯ + ntfy.sh

Claude Code ã«ã¯ [Hooks](https://docs.anthropic.com/en/docs/claude-code/hooks) ã¨ã„ã†ä»•çµ„ã¿ãŒã‚ã‚Šã€ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆã§å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚`PermissionRequest` ã‚¤ãƒ™ãƒ³ãƒˆã«ãƒ•ãƒƒã‚¯ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€è¨±å¯ç”»é¢ã® **ä»£ã‚ã‚Šã«** è‡ªå‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§åˆ¤æ–­ã‚’è¿”ã›ã¾ã™ã€‚

å…¨ä½“ã®æµã‚Œã¯ã“ã†ã§ã™ã€‚

```
Claude Code ãŒ Permission ã‚’è¦æ±‚
  â†’ ãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒèµ·å‹•
    â†’ ntfy.sh ã« Allow/Deny ãƒœã‚¿ãƒ³ä»˜ãé€šçŸ¥ã‚’é€ä¿¡
      â†’ ã‚¹ãƒžãƒ›ã§é€šçŸ¥ã‚’å—ã‘å–ã‚Šã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
        â†’ ntfy.sh ã® SSE ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡
          â†’ ãƒ•ãƒƒã‚¯ãŒ allow/deny ã® JSON ã‚’è¿”ã™
            â†’ Claude Code ãŒç¶šè¡Œ or ä¸­æ­¢
```

[ntfy.sh](https://ntfy.sh) ã¯ HTTP ãƒ™ãƒ¼ã‚¹ã®ç„¡æ–™é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ä¸è¦ã§ã€ãƒˆãƒ”ãƒƒã‚¯åã•ãˆçŸ¥ã£ã¦ã„ã‚Œã°èª°ã§ã‚‚é€šçŸ¥ã‚’é€å—ä¿¡ã§ãã¾ã™ã€‚Pushover ã‚„ LINE Notify ã¨é•ã„ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãªã—ã§ `curl` 1 ç™ºã§é€šçŸ¥ãŒé£›ã¶æ‰‹è»½ã•ãŒã€ãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã®ç›¸æ€§ãŒè‰¯ã„ã¨æ„Ÿã˜ã¦é¸ã³ã¾ã—ãŸã€‚

## å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

ãƒ•ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆæœ¬ä½“ã¯ç´„ 60 è¡Œã® bash ã§ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã‚’ 3 ã¤ç´¹ä»‹ã—ã¾ã™ã€‚

### 1. ntfy.sh ã® HTTP Action ã§ãƒœã‚¿ãƒ³ã‚’å®Ÿç¾

ntfy.sh ã¯é€šçŸ¥ã« [Action ãƒœã‚¿ãƒ³](https://docs.ntfy.sh/publish/#action-buttons) ã‚’ä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚`http` ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ ã‚’ä½¿ã„ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—æ™‚ã«åˆ¥ãƒˆãƒ”ãƒƒã‚¯ã¸ POST ã‚’é£›ã°ã™æ§‹æˆã«ã—ã¦ã„ã¾ã™ã€‚

```bash
curl -s -H "Content-Type: application/json" \
  -d "$(jq -n \
    --arg topic "$TOPIC" \
    --arg title "[$PROJECT] $TOOL_NAME" \
    --arg message "$TOOL_INPUT" \
    --arg allow_url "https://ntfy.sh/${RESPONSE_TOPIC}" \
    --arg allow_body "allow|$REQ_ID" \
    --arg deny_url "https://ntfy.sh/${RESPONSE_TOPIC}" \
    --arg deny_body "deny|$REQ_ID" \
    '{
      topic: $topic, title: $title, message: $message,
      priority: 4, tags: ["lock"],
      actions: [
        {action:"http",label:"Allow",url:$allow_url,method:"POST",body:$allow_body},
        {action:"http",label:"Deny",url:$deny_url,method:"POST",body:$deny_body}
      ]
    }')" "https://ntfy.sh/"
```

é€šçŸ¥ãƒˆãƒ”ãƒƒã‚¯ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒˆãƒ”ãƒƒã‚¯ã‚’åˆ†ã‘ã¦ã„ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚é€šçŸ¥ã®å—ä¿¡ã¨å¿œç­”ã®å—ä¿¡ã‚’åˆ¥ãƒãƒ£ãƒãƒ«ã«ã™ã‚‹ã“ã¨ã§ã€SSE ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒè‡ªåˆ†ã®é€šçŸ¥ã§æ±šæŸ“ã•ã‚Œã‚‹ã®ã‚’é˜²ã„ã§ã„ã¾ã™ã€‚

### 2. SSE + ãƒªã‚¯ã‚¨ã‚¹ãƒˆ ID ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç‰¹å®š

ãƒ•ãƒƒã‚¯ã¯é€šçŸ¥ã‚’é€ã£ãŸã‚ã¨ã€ntfy.sh ã® SSE ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ã¡ã¾ã™ã€‚

```bash
REQ_ID="$(date +%s)-$$"

while IFS= read -r line; do
  if [[ "$line" == data:* ]]; then
    DATA="${line#data: }"
    MSG=$(echo "$DATA" | jq -r '.message // empty' 2>/dev/null)
    if [[ "$MSG" == *"|$REQ_ID" ]]; then
      DECISION="${MSG%%|*}"
      break
    fi
  fi
done < <(curl -s -N --max-time "$WAIT_TIMEOUT" \
  -H "Accept: text/event-stream" \
  "https://ntfy.sh/${RESPONSE_TOPIC}/sse")
```

`REQ_ID`ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— + PIDï¼‰ã‚’é€šçŸ¥ã® body ã«åŸ‹ã‚è¾¼ã¿ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã‚‚å«ã‚ã‚‹ã“ã¨ã§ã€**è¤‡æ•°ã®é€šçŸ¥ãŒåŒæ™‚ã«é£›ã‚“ã§ã‚‚æ­£ã—ã„å¿œç­”ã‚’ç‰¹å®š** ã§ãã¾ã™ã€‚ã“ã‚ŒãŒãªã„ã¨ã€å‰ã®é€šçŸ¥ã¸ã®å¿œç­”ã‚’ä»Šã®é€šçŸ¥ã®çµæžœã¨ã—ã¦æ‹¾ã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

### 3. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

`--max-time` ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã•ã›ã€å¿œç­”ãŒãªã‹ã£ãŸå ´åˆã¯ **ä½•ã‚‚å‡ºåŠ›ã›ãšã« exit 0** ã—ã¾ã™ã€‚

```bash
if [ "$DECISION" = "allow" ]; then
  jq -n '{hookSpecificOutput:{...decision:{behavior:"allow"}}}'
elif [ "$DECISION" = "deny" ]; then
  jq -n '{hookSpecificOutput:{...decision:{behavior:"deny"}}}'
fi
# Timeout: no output â†’ falls back to interactive prompt
```

Claude Code ã®ãƒ•ãƒƒã‚¯ä»•æ§˜ã§ã¯ã€å‡ºåŠ›ãªã— + exit 0 ã¯ã€Œãƒ•ãƒƒã‚¯ãŒåˆ¤æ–­ã—ãªã‹ã£ãŸã€ã¨è§£é‡ˆã•ã‚Œã€é€šå¸¸ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™ã€‚ã‚¹ãƒžãƒ›ã‚’è¦‹ã¦ã„ãªãã¦ã‚‚ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¾Œã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å¯¾å¿œã§ãã‚‹ã®ã§å®‰å…¨ã§ã™ã€‚

## å°Žå…¥æ‰‹é †

### å‰æ

- macOS ã¾ãŸã¯ Linux
- `bash`, `jq`, `curl` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- ã‚¹ãƒžãƒ›ã« [ntfy ã‚¢ãƒ—ãƒª](https://ntfy.sh) ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
git clone https://github.com/coa00/claude-push.git
cd claude-push
bash install.sh
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒå¯¾è©±å½¢å¼ã§ä»¥ä¸‹ã‚’è¡Œã„ã¾ã™ã€‚

1. **ä¾å­˜ãƒã‚§ãƒƒã‚¯** â€” `jq` ã¨ `curl` ã®å­˜åœ¨ç¢ºèª
2. **ãƒˆãƒ”ãƒƒã‚¯åã®å…¥åŠ›** â€” æœªå…¥åŠ›ãªã‚‰ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆï¼ˆ`claude-push-a1b2c3d4`ï¼‰
3. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ** â€” `~/.config/claude-push/config`
4. **ãƒ•ãƒƒã‚¯ã®é…ç½®** â€” `~/.local/share/claude-push/hooks/claude-push.sh`
5. **Claude è¨­å®šã¸ã®ãƒ•ãƒƒã‚¯ç™»éŒ²** â€” `~/.claude/settings.json` ã« `jq` ã§å®‰å…¨ã«ãƒžãƒ¼ã‚¸
6. **ãƒ†ã‚¹ãƒˆé€šçŸ¥ã®é€ä¿¡** â€” ã‚¹ãƒžãƒ›ã«å±Šãã‹ç¢ºèª

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ntfy ã‚¢ãƒ—ãƒªã§ãƒˆãƒ”ãƒƒã‚¯ã‚’è³¼èª­ã™ã‚Œã°å®Œäº†ã§ã™ã€‚

### è¨­å®šã®å¤‰æ›´

`~/.config/claude-push/config` ã‚’ç·¨é›†ã™ã‚‹ã ã‘ã§ã™ã€‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸è¦ã€‚

```bash
# ãƒˆãƒ”ãƒƒã‚¯åï¼ˆntfy.sh ã®ãƒãƒ£ãƒãƒ«åã€‚å…±æœ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¨ã—ã¦æ©Ÿèƒ½ï¼‰
CLAUDE_PUSH_TOPIC="my-unique-topic"

# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç§’æ•°ï¼ˆã“ã®æ™‚é–“å†…ã«å¿œç­”ãŒãªã‘ã‚Œã°ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
CLAUDE_PUSH_TIMEOUT=90
```

### å‹•ä½œç¢ºèª

```bash
# Allow/Deny ãƒœã‚¿ãƒ³ä»˜ããƒ†ã‚¹ãƒˆé€šçŸ¥ã‚’é€ä¿¡
bash scripts/test.sh test-notify

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
bash scripts/test.sh status
```

`status` ã‚³ãƒžãƒ³ãƒ‰ã§ Config / Hook / Settings / ä¾å­˜ã® 4 é …ç›®ã‚’ç¢ºèªã§ãã¾ã™ã€‚

```
=== claude-push status ===
[OK] Config: ~/.config/claude-push/config
     Topic: my-unique-topic
     Timeout: 90s
[OK] Hook: ~/.local/share/claude-push/hooks/claude-push.sh
[OK] Settings: hook registered in ~/.claude/settings.json
[OK] Dependency: jq
[OK] Dependency: curl
```

### ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
bash uninstall.sh
```

Claude è¨­å®šã‹ã‚‰ãƒ•ãƒƒã‚¯ã‚’å‰Šé™¤ã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã«é™¤åŽ»ã—ã¾ã™ã€‚

## ä½¿ã„æ–¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸

å°Žå…¥å¾Œã®æ—¥å¸¸ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚

1. Claude Code ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’æŒ‡ç¤ºã—ã¦ã€å¸­ã‚’ç«‹ã¤
2. æ•°åˆ†å¾Œã€ã‚¹ãƒžãƒ›ã« `[myproject] Bash: npm run build` ã®é€šçŸ¥ãŒæ¥ã‚‹
3. å†…å®¹ã‚’ç¢ºèªã—ã¦ **Allow** ã‚’ã‚¿ãƒƒãƒ—
4. ãƒ‡ã‚¹ã‚¯ã«æˆ»ã£ãŸã‚‰ã€ãƒ“ãƒ«ãƒ‰ã¾ã§çµ‚ã‚ã£ã¦ã„ã‚‹

ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¸­ã‚„ç§»å‹•ä¸­ã§ã‚‚ã€ã‚¹ãƒžãƒ›ã•ãˆã‚ã‚Œã° Claude Code ã‚’æ­¢ã‚ãšã«æ¸ˆã¿ã¾ã™ã€‚

## Before / After

| | Before | After |
|--|--------|-------|
| è¨±å¯ã®ç¢ºèªæ–¹æ³• | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `y`/`n` | ã‚¹ãƒžãƒ›ã§ Allow/Deny |
| é›¢å¸­ä¸­ã®å‹•ä½œ | Claude Code ãŒåœæ­¢ã—ã¦å¾…æ©Ÿ | ã‚¹ãƒžãƒ›é€šçŸ¥ã§å¯¾å¿œå¯èƒ½ |
| ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ãªã—ï¼ˆæ°¸é ã«å¾…ã¤ï¼‰ | 90 ç§’å¾Œã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | allowlist ã‹æ‰‹å‹•ç¢ºèª | é€šçŸ¥ã”ã¨ã«å€‹åˆ¥åˆ¤æ–­ |
| å°Žå…¥ã‚³ã‚¹ãƒˆ | â€” | `bash install.sh` ã§ 3 åˆ† |

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹æ³¨æ„

ntfy.sh ã®ãƒˆãƒ”ãƒƒã‚¯åã¯ **å…±æœ‰ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ** ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒˆãƒ”ãƒƒã‚¯åã‚’çŸ¥ã£ã¦ã„ã‚‹äººã¯èª°ã§ã‚‚é€šçŸ¥ã‚’é€ã£ãŸã‚Šã€å¿œç­”ã‚’å½è£…ã§ãã¾ã™ã€‚

- ãƒˆãƒ”ãƒƒã‚¯åã¯æŽ¨æ¸¬ã•ã‚Œã«ãã„ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆï¼‰
- ã‚ˆã‚ŠåŽ³å¯†ã«ã—ãŸã„å ´åˆã¯ [ntfy.sh ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡](https://docs.ntfy.sh/config/#access-control) ã‚’è¨­å®šã™ã‚‹
- é‡è¦ãªæ“ä½œï¼ˆ`rm -rf` ãªã©ï¼‰ã¯ allowlist ã§æ˜Žç¤ºçš„ã«ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ãŠãã®ãŒå®‰å…¨

## ã¾ã¨ã‚

ã€Œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å¼µã‚Šä»˜ãã‹ã€å…¨è¨±å¯ã™ã‚‹ã‹ã€ã®äºŒæŠžã ã£ãŸ Claude Code ã® Permission é‹ç”¨ã«ã€**ã‚¹ãƒžãƒ›æ‰¿èª** ã¨ã„ã†ç¬¬ä¸‰ã®é¸æŠžè‚¢ã‚’ä½œã‚Šã¾ã—ãŸã€‚

ä»•çµ„ã¿è‡ªä½“ã¯ bash + ntfy.sh ã® HTTP Action + SSE ã¨ã„ã†æž¯ã‚ŒãŸæŠ€è¡“ã®çµ„ã¿åˆã‚ã›ã§ã€ãƒ•ãƒƒã‚¯æœ¬ä½“ã¯ 60 è¡Œç¨‹åº¦ã§ã™ã€‚Claude Code ã® Hooks API ãŒã‚ˆãã§ãã¦ã„ã¦ã€`PermissionRequest` ã« JSON ã‚’è¿”ã™ã ã‘ã§è¨±å¯/æ‹’å¦ã‚’åˆ¶å¾¡ã§ãã‚‹ã®ãŒå¤§ãã‹ã£ãŸã§ã™ã€‚

åŠ¹æžœã«ã¤ã„ã¦ã¯ã“ã‚Œã‹ã‚‰æ¤œè¨¼ã—ã¦ã„ãæ®µéšŽã§ã™ã€‚1 æ—¥ã®ã†ã¡ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«æˆ»ã‚‹å›žæ•°ãŒã©ã‚Œã ã‘æ¸›ã‚‹ã‹ã€Permission å¾…ã¡ã«ã‚ˆã‚‹åœæ­¢æ™‚é–“ãŒã©ã†å¤‰ã‚ã‚‹ã‹ã‚’è¿½ã£ã¦ã„ãäºˆå®šã§ã™ã€‚å°‘ãªãã¨ã‚‚ã€Œã‚³ãƒ¼ãƒ’ãƒ¼ã‚’æ·¹ã‚Œã«è¡Œã£ã¦ã„ã‚‹é–“ã« Claude Code ãŒæ­¢ã¾ã£ã¦ã„ã‚‹ã€ã¯è§£æ¶ˆã§ããã†ã§ã™ã€‚

ã‚ãªãŸã¯ Claude Code ã® Permission ã‚’ã©ã†ç®¡ç†ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ allowlist æ´¾ã‚‚æ‰‹å‹•ç¢ºèªæ´¾ã‚‚ã€ä¸€åº¦è©¦ã—ã¦ã¿ã¦ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚

https://github.com/coa00/claude-push

## å‚è€ƒ

- [Claude Code Hooks ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.anthropic.com/en/docs/claude-code/hooks)
- [ntfy.sh](https://ntfy.sh) â€” HTTP ãƒ™ãƒ¼ã‚¹ã®é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
- [ntfy.sh Action Buttons](https://docs.ntfy.sh/publish/#action-buttons)
- [konsti-web/claude_push](https://github.com/konsti-web/claude_push) â€” å…ƒãƒã‚¿ï¼ˆWindows/PowerShell ç‰ˆï¼‰
